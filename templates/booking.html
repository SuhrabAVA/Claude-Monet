{% extends "base.html" %}

{% block content %}
<section class="page-hero">
  <div class="container">
    <h1 class="page-title">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
    <div class="page-title-underline"></div>
    <p class="page-subtitle">
      –ó–∞–±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ —Å—Ç–æ–ª–∏–∫ –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ –Ω–∞–º –≤ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–º –∫—É–ª–∏–Ω–∞—Ä–Ω–æ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏
    </p>
  </div>
</section>

<section class="cart-section" id="cart">
  <div class="container">
    <div class="cart-card">
      <div class="cart-head">
        <div class="cart-head-left">
          <h2 class="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</h2>
          {% if cart_count > 0 %}
            <div class="cart-badge">
              <span class="cart-badge-dot"></span>
              <span>{{ cart_count }} —à—Ç.</span>
            </div>
          {% endif %}
        </div>

        <div class="cart-head-right">
          <div class="cart-total-box">
            <div class="cart-total-label">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
            <div class="cart-total-value">{{ cart_total }}</div>
          </div>

          {% if cart_count > 0 %}
          <form method="post" action="{{ url_for('booking') }}" class="cart-clear-form">
            <input type="hidden" name="action" value="cart_clear">
            <button type="submit" class="btn btn-outline btn-sm">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
          </form>
          {% endif %}
        </div>
      </div>

      {% if cart_count == 0 %}
        <div class="cart-empty">
          <div class="cart-empty-title">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
          <div class="cart-empty-text">–î–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞ –∏–∑ –º–µ–Ω—é, –∏ –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å.</div>
          <a class="btn btn-gold" href="{{ url_for('menu') }}">–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é</a>
        </div>
      {% else %}
        <div class="cart-list">
          {% for item in cart_items %}
          <div class="cart-item">
            <div class="cart-item-thumb">
              <img
                src="{{ url_for('static', filename=item.img) }}"
                alt="{{ item.title }}"
                loading="lazy"
              >
            </div>

            <div class="cart-item-info">
              <div class="cart-item-name">{{ item.title }}</div>
              <div class="cart-item-meta">
                <span class="cart-item-price">–¶–µ–Ω–∞: <b>{{ item.price_str }}</b></span>
                <span class="cart-item-line">–ò—Ç–æ–≥–æ: <b>{{ item.line_str }}</b></span>
              </div>
            </div>

            <div class="cart-item-actions">
              <form method="post" action="{{ url_for('booking') }}" class="qty-form">
                <input type="hidden" name="item_id" value="{{ item.id }}">

                <button class="qty-btn" type="submit" name="action" value="cart_dec" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å">
                  ‚Äì
                </button>

                <div class="qty-value">{{ item.qty }}</div>

                <button class="qty-btn" type="submit" name="action" value="cart_inc" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">
                  +
                </button>

                <button class="remove-btn" type="submit" name="action" value="cart_remove" aria-label="–£–¥–∞–ª–∏—Ç—å">
                  √ó
                </button>
              </form>
            </div>
          </div>
          {% endfor %}
        </div>

        <div class="cart-footer">
          <div class="cart-footer-left">
            <div class="cart-note">
              –í—Å–µ –±–ª—é–¥–∞ –≥–æ—Ç–æ–≤—è—Ç—Å—è —Å–≤–µ–∂–∏–º–∏ –Ω–∞ –∑–∞–∫–∞–∑. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∞–ª–ª–µ—Ä–≥–∏–∏ –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ‚Äî
              —É–∫–∞–∂–∏—Ç–µ —ç—Ç–æ –≤ ‚Äú–û—Å–æ–±—ã—Ö –ø–æ–∂–µ–ª–∞–Ω–∏—è—Ö‚Äù.
            </div>
          </div>

          <div class="cart-footer-right">
            <div class="cart-grand">
              <div class="cart-grand-label">–ö –æ–ø–ª–∞—Ç–µ</div>
              <div class="cart-grand-value">{{ cart_total }}</div>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="booking-section">
  <div class="container">
    <div class="booking-grid">
      <!-- LEFT -->
      <div class="booking-left">
        <h2 class="block-title">–ü–æ—Å–µ—Ç–∏—Ç–µ –Ω–∞—Å</h2>

        <div class="info-list">
          <div class="info-row">
            <div class="info-ico">üìç</div>
            <div>
              <div class="info-label">–ê–¥—Ä–µ—Å</div>
              <div class="info-text">123 Rue des Beaux-Arts<br>75006 –ü–∞—Ä–∏–∂, –§—Ä–∞–Ω—Ü–∏—è</div>
            </div>
          </div>

          <div class="info-row">
            <div class="info-ico">üìû</div>
            <div>
              <div class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
              <div class="info-text">+33 1 23 45 67 89</div>
            </div>
          </div>

          <div class="info-row">
            <div class="info-ico">‚úâÔ∏è</div>
            <div>
              <div class="info-label">Email</div>
              <div class="info-text">reservations@claudemonet.fr</div>
            </div>
          </div>

          <div class="info-row">
            <div class="info-ico">üïí</div>
            <div>
              <div class="info-label">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</div>
              <div class="info-text">
                –í—Ç–æ—Ä–Ω–∏–∫ ‚Äì –°—É–±–±–æ—Ç–∞<br>
                –û–±–µ–¥: 12:00 ‚Äì 14:30<br>
                –£–∂–∏–Ω: 19:00 ‚Äì 22:30<br><br>
                –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: 12:00 ‚Äì 1:00<br>
                –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –í—ã—Ö–æ–¥–Ω–æ–π
              </div>
            </div>
          </div>
        </div>

        <div class="rules-card">
          <div class="rules-title">–ü—Ä–∞–≤–∏–ª–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</div>
          <ul class="rules-list">
            <li>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ, –¥–æ 30 –¥–Ω–µ–π</li>
            <li>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–±—ã–≤–∞–π—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –≤—Ä–µ–º–µ–Ω–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
            <li>–î–ª—è –≥—Ä—É–ø–ø –æ—Ç 8 —á–µ–ª–æ–≤–µ–∫, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º –Ω–∞–ø—Ä—è–º—É—é</li>
            <li>–î—Ä–µ—Å—Å-–∫–æ–¥: —ç–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞</li>
            <li>–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–∞ –∑–∞ 24 —á–∞—Å–∞</li>
          </ul>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="booking-right">
        <h2 class="block-title">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª–∏–∫</h2>

        <form method="post" action="{{ url_for('booking') }}" class="booking-form">
          <input type="hidden" name="action" value="booking_submit">

          <div class="field">
            <label>–ü–æ–ª–Ω–æ–µ –∏–º—è <span class="req">*</span></label>
            <input type="text" name="full_name" placeholder="" required>
          </div>

          <div class="field">
            <label>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ <span class="req">*</span></label>
            <input type="email" name="email" placeholder="" required>
          </div>

          <div class="field">
            <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ <span class="req">*</span></label>
            <input type="text" name="phone" placeholder="" required>
          </div>

          <div class="row2">
            <div class="field">
              <label>–î–∞—Ç–∞ <span class="req">*</span></label>
              <input type="date" name="date" required>
            </div>
            <div class="field">
              <label>–í—Ä–µ–º—è <span class="req">*</span></label>
              <input type="time" name="time" required>
            </div>
          </div>

          <div class="field">
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π <span class="req">*</span></label>
            <select name="guests" required>
              <option value="1">1 –≥–æ—Å—Ç—å</option>
              <option value="2" selected>2 –≥–æ—Å—Ç—è</option>
              <option value="3">3 –≥–æ—Å—Ç—è</option>
              <option value="4">4 –≥–æ—Å—Ç—è</option>
              <option value="5">5 –≥–æ—Å—Ç–µ–π</option>
              <option value="6">6 –≥–æ—Å—Ç–µ–π</option>
              <option value="7">7 –≥–æ—Å—Ç–µ–π</option>
              <option value="8">8 –≥–æ—Å—Ç–µ–π</option>
            </select>
          </div>

          <div class="field">
            <label>–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
            <textarea name="notes" rows="5" placeholder="–î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—é..."></textarea>
          </div>

          <button type="submit" class="btn btn-gold btn-wide">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock %}
